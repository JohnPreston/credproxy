<?xml version="1.0" encoding="UTF-8"?>
<svg width="600" height="400" xmlns="http://www.w3.org/2000/svg">
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="600" height="400" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2"/>

  <!-- Title -->
  <text x="300" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#212529">
    Docker Compose Network Namespace Sharing
  </text>

  <!-- CredProxy Container -->
  <rect x="200" y="60" width="200" height="80" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
  <text x="300" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1976d2">
    CredProxy Container
  </text>
  <text x="300" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    HTTP Server
  </text>
  <text x="300" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    localhost:1338
  </text>

  <!-- Arrow down -->
  <path d="M 300 140 L 300 170" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="320" y="160" font-family="Arial, sans-serif" font-size="10" fill="#666">
    network_mode: service:credproxy
  </text>
  <text x="320" y="175" font-family="Arial, sans-serif" font-size="10" fill="#666">
    (shares network namespace)
  </text>

  <!-- App Containers -->
  <rect x="80" y="190" width="160" height="70" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="5"/>
  <text x="160" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#7b1fa2">
    Your App Container
  </text>
  <text x="160" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    AWS SDK
  </text>
  <text x="160" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    localhost:1338
  </text>

  <rect x="360" y="190" width="160" height="70" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" rx="5"/>
  <text x="440" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#7b1fa2">
    Worker App Container
  </text>
  <text x="440" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    AWS SDK
  </text>
  <text x="440" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    localhost:1338
  </text>

  <!-- Lines to shared namespace -->
  <path d="M 160 260 L 160 290 L 300 290" stroke="#666" stroke-width="1" stroke-dasharray="3,3"/>
  <path d="M 440 260 L 440 290 L 300 290" stroke="#666" stroke-width="1" stroke-dasharray="3,3"/>

  <!-- Shared Network Namespace Box -->
  <rect x="50" y="300" width="500" height="60" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5" stroke-dasharray="5,5"/>
  <text x="300" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f57c00">
    SAME NETWORK NAMESPACE
  </text>
  <text x="300" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#424242">
    localhost:1338 resolves to CredProxy
  </text>
  <text x="300" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">
    KEY: AWS SDK requires localhost/127.0.0.1 for security
  </text>
</svg>
